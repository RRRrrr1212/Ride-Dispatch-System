# ğŸš— Ride-Dispatch-System (å…±ä¹˜/å«è»Šå¹³å°)

> æ¨¡æ“¬ Uber/Taxi çš„æ ¸å¿ƒæ´¾å–®èˆ‡èª¿åº¦é‚è¼¯ç³»çµ±

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆç‚ºå…±ä¹˜å«è»Šå¹³å°çš„æ ¸å¿ƒé‚è¼¯æ¨¡æ“¬ç³»çµ±ï¼Œé‡é»å¯¦ä½œï¼š
- **é…å°æ¼”ç®—æ³•** - æœ€è¿‘è·é›¢ã€è»Šç¨®ç¯©é¸
- **è¨ˆåƒ¹ç³»çµ±** - åƒæ•¸åŒ–è²»ç‡å…¬å¼
- **ç‹€æ…‹æ©Ÿ** - è¨‚å–®ç”Ÿå‘½é€±æœŸç®¡ç†
- **ä½µç™¼æ§åˆ¶** - H2 æ¶å–®ã€H4 å†ªç­‰æ€§

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Web Clients (React + PWA)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Passenger Appâ”‚   Driver App     â”‚      Admin Console        â”‚
â”‚ (/rider)     â”‚   (/driver)      â”‚      (/admin)             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                       â”‚
       â”‚         HTTP/REST (Polling)            â”‚
       â”‚                â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Spring Boot Server                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€šè¨Šæ–¹å¼
- **å”å®š**: HTTP/REST
- **è³‡æ–™æ ¼å¼**: JSON
- **å³æ™‚åŒæ­¥**: Polling (æ¯ 1-3 ç§’è¼ªè©¢)
- **åœ°åœ–æ•´åˆ**: OpenStreetMap (Leaflet) + OSRM (è·¯å¾‘è¦åŠƒ)

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
ride-dispatch-system/
â”œâ”€â”€ server/                    # Spring Boot å¾Œç«¯
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/uber/
â”‚   â”‚       â”œâ”€â”€ controller/    # REST API Controllers
â”‚   â”‚       â”œâ”€â”€ service/       # Business Logic
â”‚   â”‚       â”œâ”€â”€ model/         # Domain Models
â”‚   â”‚       â””â”€â”€ repository/    # Data Access
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ clients/
â”‚   â””â”€â”€ web-client/            # React å‰ç«¯æ‡‰ç”¨ (å–ä»£ JavaFX)
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ pages/         # é é¢ (Rider, Driver, Admin)
â”‚       â”‚   â”œâ”€â”€ components/    # å…±ç”¨å…ƒä»¶ (Map, UI)
â”‚       â”‚   â””â”€â”€ api/           # API ä¸²æ¥
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                      # æ–‡ä»¶
â”‚   â”œâ”€â”€ specs/                 # å¾Œç«¯è¦æ ¼æ›¸
â”‚   â”‚   â”œâ”€â”€ state-machine.md   # ç‹€æ…‹æ©Ÿåˆç´„ â­
â”‚   â”‚   â”œâ”€â”€ api-spec.md        # API è¦æ ¼ â­
â”‚   â”‚   â””â”€â”€ SYSTEM_SPEC.md     # ç³»çµ±è¦æ ¼æ›¸
â”‚   â”‚
â”‚   â”œâ”€â”€ web-client/            # å‰ç«¯é–‹ç™¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ 00_OVERVIEW.md     # å‰ç«¯æ¶æ§‹ç¸½è¦½
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ reports/               # éšæ®µæ€§å ±å‘Š
â”‚
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Java 21+
- Maven 3.9+
- Node.js 18+ (å‰ç«¯)

### 1. å•Ÿå‹•å¾Œç«¯
```bash
cd server
mvn spring-boot:run
```

### 2. å•Ÿå‹•å‰ç«¯ (Web Client)
```bash
cd clients/web-client
npm install
npm run dev
```
å•Ÿå‹•å¾Œè«‹è¨ªå•:
- **ä¹˜å®¢ç«¯**: `http://localhost:5173/rider`
- **å¸æ©Ÿç«¯**: `http://localhost:5173/driver`
- **ç®¡ç†å¾Œå°**: `http://localhost:5173/admin`

## ğŸ§ª æ¸¬è©¦é‡é»

### H2: æ¶å–®ä½µç™¼æ¸¬è©¦
```
å ´æ™¯: 10 ä½å¸æ©ŸåŒæ™‚å°åŒä¸€ç­† PENDING è¨‚å–®ç™¼é€ Accept
é æœŸ: åƒ… 1 ä½æˆåŠŸ (200 OK)ï¼Œå…¶é¤˜ 9 ä½å¤±æ•— (409 Conflict)
é©—è­‰: æœ€çµ‚ driverId å”¯ä¸€ï¼ŒAudit Log è¨˜éŒ„å®Œæ•´
```

### H4: å†ªç­‰æ€§æ¸¬è©¦
```
å ´æ™¯: åŒä¸€è«‹æ±‚å› ç¶²è·¯å•é¡Œè¢«é‡è¤‡ç™¼é€
é æœŸ: é‡è¤‡è«‹æ±‚ä¸ç”¢ç”Ÿå‰¯ä½œç”¨
é©—è­‰: driverIdã€startAtã€fare ç­‰é—œéµæ¬„ä½ä¸è¢«è¦†å¯«
```

### åŸ·è¡Œæ¸¬è©¦
```bash
# åŸ·è¡Œæ‰€æœ‰å¾Œç«¯æ¸¬è©¦
cd server
mvn test

# ç”¢ç”Ÿè¦†è“‹ç‡å ±å‘Š
mvn jacoco:report
```

## ğŸ“– æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | èªªæ˜ | çµ„å“¡ç”¨é€” |
|-----|------|---------|
| [docs/specs/state-machine.md](docs/specs/state-machine.md) | ç‹€æ…‹æ©Ÿåˆç´„ | æ’°å¯«ç‹€æ…‹æ©Ÿæ¸¬è©¦ |
| [docs/specs/api-spec.md](docs/specs/api-spec.md) | API è¦æ ¼ | æ’°å¯«æ•´åˆæ¸¬è©¦ |
| [docs/web-client/00_OVERVIEW.md](docs/web-client/00_OVERVIEW.md) | å‰ç«¯ç¸½è¦½ | å‰ç«¯é–‹ç™¼åƒè€ƒ |

## ğŸ‘¥ åœ˜éšŠåˆ†å·¥

| è§’è‰² | è² è²¬é …ç›® |
|-----|---------|
| å¾Œç«¯é–‹ç™¼ | Spring Boot Serverã€æ ¸å¿ƒé‚è¼¯ |
| å‰ç«¯é–‹ç™¼ | React Web App (PWA) |
| æ¸¬è©¦ | JUnit å–®å…ƒ/æ•´åˆ/ä½µç™¼æ¸¬è©¦ |

---

**ç‰ˆæœ¬**: v1.1
**æ›´æ–°æ—¥æœŸ**: 2025-12-29
